import{_ as o,c as r,o as a,ae as e}from"./chunks/framework.Dgg8-8ov.js";const n="/images/image%20(19).png",u=JSON.parse('{"title":"ENOTFOUND","description":"后端服务访问接口抛出此错误","frontmatter":{"description":"后端服务访问接口抛出此错误"},"headers":[],"relativePath":"notes/be/exception/enotfound.md","filePath":"notes/be/exception/enotfound.md","lastUpdated":1751126425000}'),s={name:"notes/be/exception/enotfound.md"};function i(l,t,g,d,h,c){return a(),r("div",null,t[0]||(t[0]=[e('<h1 id="enotfound" tabindex="-1">ENOTFOUND <a class="header-anchor" href="#enotfound" aria-label="Permalink to &quot;ENOTFOUND&quot;">​</a></h1><blockquote><ul><li>📅 <strong>日期</strong>：2019年12月06日 星期五</li><li>🌤 <strong>天气</strong>：多云微风</li></ul></blockquote><h2 id="问题描述" tabindex="-1">问题描述 <a class="header-anchor" href="#问题描述" aria-label="Permalink to &quot;问题描述&quot;">​</a></h2><p><img src="'+n+'" alt="A"></p><ol><li><strong>前端</strong>访问后端<strong>服务A登录</strong>接口，在<strong>服务A登录</strong>接口中调用<strong>服务B账号密码验证</strong>接口，然后<strong>服务A</strong>中无法正确调用<strong>服务B</strong>的接口，并捕获到上图的错误；</li><li>在<strong>本地开发</strong>调试的时候没有问题，<strong>服务A</strong>发布到开发环境出现这个错误；</li></ol><h2 id="问题分析" tabindex="-1">问题分析 <a class="header-anchor" href="#问题分析" aria-label="Permalink to &quot;问题分析&quot;">​</a></h2><p>第一次遇到这种问题，首先入手是两个信息：</p><ol><li>错误码：<strong>ENOTFOUND</strong> &amp; <strong>getaddrinfo；</strong></li><li>调用服务B接口：<a href="https://service-b/api%EF%BC%9B" target="_blank" rel="noreferrer">https://service-b/api；</a></li></ol><h3 id="错误码原因" tabindex="-1"><strong>错误码原因</strong> <a class="header-anchor" href="#错误码原因" aria-label="Permalink to &quot;**错误码原因**&quot;">​</a></h3><p>这个错误找了一下原因，一般为DNS无法解析域名会抛出这样一个错误。</p><h3 id="服务b域名" tabindex="-1">服务B域名 <a class="header-anchor" href="#服务b域名" aria-label="Permalink to &quot;服务B域名&quot;">​</a></h3><p>询问下运维后给到的反馈是，<strong>服务B</strong>的域名解析是公司内网的，在外网访问无法解析到正确的服务器上。</p><h3 id="问题解释" tabindex="-1">问题解释 <a class="header-anchor" href="#问题解释" aria-label="Permalink to &quot;问题解释&quot;">​</a></h3><p>经过以上分析，错误原因是服务B在公网无法正确解析的问题。详细：</p><ol><li>在本地开发时，因使用的是公司内网，所以本地开发能够正常访问；</li><li><strong>服务A</strong>在开发环境，访问<strong>服务B</strong>的域名走的是公网，DNS无法正确解析<strong>服务B</strong>的域名；</li></ol><h2 id="问题解决" tabindex="-1">问题解决 <a class="header-anchor" href="#问题解决" aria-label="Permalink to &quot;问题解决&quot;">​</a></h2><p>问题反馈给运维后，运维给了两个解决方案：</p><ol><li><strong>服务B</strong>的域名解析放到公网；</li><li><strong>服务B</strong>的域名在<strong>服务A</strong>内部解析；</li></ol><p>因<strong>服务B</strong>只需要在公司内部访问，所以没有必要公开到公网上，还增加了不必要的风险。</p>',19)]))}const b=o(s,[["render",i]]);export{u as __pageData,b as default};
