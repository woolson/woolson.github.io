import{_ as i,c as a,o as e,ae as t}from"./chunks/framework.Dgg8-8ov.js";const n="/images/image%20(32).png",E=JSON.parse('{"title":"ERR_CONTENT_DECODING_FAILED","description":"服务器正确响应，浏览器或Postman无法正确获取响应","frontmatter":{"description":"服务器正确响应，浏览器或Postman无法正确获取响应"},"headers":[],"relativePath":"notes/be/exception/err_content_decoding_failed.md","filePath":"notes/be/exception/err_content_decoding_failed.md","lastUpdated":1751126425000}'),r={name:"notes/be/exception/err_content_decoding_failed.md"};function p(l,s,h,o,k,d){return e(),a("div",null,s[0]||(s[0]=[t('<h1 id="err-content-decoding-failed" tabindex="-1">ERR_CONTENT_DECODING_FAILED <a class="header-anchor" href="#err-content-decoding-failed" aria-label="Permalink to &quot;ERR\\_CONTENT\\_DECODING\\_FAILED&quot;">​</a></h1><blockquote><ul><li>📅 <strong>日期</strong>：2019年11月13日 星期三</li><li>🌤 <strong>天气</strong>：小雨</li></ul></blockquote><h2 id="问题描述" tabindex="-1">问题描述 <a class="header-anchor" href="#问题描述" aria-label="Permalink to &quot;问题描述&quot;">​</a></h2><p>在本地<code>Debug</code>，服务器已经正确返回响应内容。部署开发环境后浏览器或<code>PostMan</code>无法正确获取响应内容。浏览器会在控制台输出以下错误。</p><p><img src="'+n+`" alt="net::ERRCONTENTDECODINGFAILED 201"></p><h2 id="问题解决" tabindex="-1">问题解决 <a class="header-anchor" href="#问题解决" aria-label="Permalink to &quot;问题解决&quot;">​</a></h2><p>因公司使用的是AWS统一的中台进行服务部署的应该不会有问题，然后就开始面向Google编程。找到Stack Overflow一篇文章<a href="https://stackoverflow.com/questions/52464671/ajax-returning-err-content-decoding-failed-200-using-codeigniter" target="_blank" rel="noreferrer">AJAX returning ERR_CONTENT_DECODING_FAILED 200 using Codeigniter</a>。</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-dark github-light vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">const</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> app</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> =</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> await</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> NestFactory.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">create</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">&lt;</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">NestExpressApplication</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">&gt;(AppModule, {</span></span>
<span class="line"><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    logger: </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">new</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> ServerLogger</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(),</span></span>
<span class="line"><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">    cors: </span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">true</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">});</span></span>
<span class="line"><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">app.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">useGlobalInterceptors</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">new</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> TransformInterceptor</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">());</span></span>
<span class="line"><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">app.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">use</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">compression</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">()); </span><span style="--shiki-dark:#6A737D;--shiki-light:#6A737D;">// &lt;- 问题出在这</span></span></code></pre></div><p>问题出在我服务器使用了压缩中间件，并且<code>nginx</code>也开启了<code>gzip</code>。<strong>然后移除了这个压缩中间件后，就正常了。</strong></p><h2 id="q-a" tabindex="-1">Q&amp;A <a class="header-anchor" href="#q-a" aria-label="Permalink to &quot;Q&amp;A&quot;">​</a></h2><p>是使用 <code>nginx</code> 还是使用<a href="https://www.npmjs.com/package/compression" target="_blank" rel="noreferrer"><code>compression</code></a>呢？<a href="https://github.com/expressjs/compression/issues/131" target="_blank" rel="noreferrer">参考这里</a></p>`,11)]))}const g=i(r,[["render",p]]);export{E as __pageData,g as default};
