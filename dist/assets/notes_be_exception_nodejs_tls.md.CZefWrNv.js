import{_ as i,c as a,o as t,ae as e}from"./chunks/framework.Dgg8-8ov.js";const c=JSON.parse('{"title":"unsupported protocolé”™è¯¯","description":"Nodejsè¯·æ±‚æŠ¥unsupported protocolé”™è¯¯","frontmatter":{"description":"Nodejsè¯·æ±‚æŠ¥unsupported protocolé”™è¯¯"},"headers":[],"relativePath":"notes/be/exception/nodejs_tls.md","filePath":"notes/be/exception/nodejs_tls.md","lastUpdated":1751126425000}'),n={name:"notes/be/exception/nodejs_tls.md"};function l(p,s,h,o,k,d){return t(),a("div",null,s[0]||(s[0]=[e(`<h1 id="unsupported-protocolé”™è¯¯" tabindex="-1">unsupported protocolé”™è¯¯ <a class="header-anchor" href="#unsupported-protocolé”™è¯¯" aria-label="Permalink to &quot;unsupported protocolé”™è¯¯&quot;">â€‹</a></h1><blockquote><ul><li>ğŸ“… <strong>æ—¥æœŸ</strong>ï¼š2020å¹´11æœˆ17æ—¥ æ˜ŸæœŸäºŒ</li><li>ğŸŒ¤ <strong>å¤©æ°”</strong>ï¼šå¤šäº‘å¾®é£</li></ul></blockquote><h2 id="é—®é¢˜æè¿°" tabindex="-1">é—®é¢˜æè¿° <a class="header-anchor" href="#é—®é¢˜æè¿°" aria-label="Permalink to &quot;é—®é¢˜æè¿°&quot;">â€‹</a></h2><ul><li>Nodejs version: 12.19.0</li><li>axios version: 0.21.0</li></ul><p>ç›®çš„æ˜¯çˆ¬è™«æŸä¸ªç½‘ç«™ï¼Œæ¯å¤©è‡ªåŠ¨è·å–æƒ³è¦çš„ä¿¡æ¯ç„¶åæ¨é€åˆ°ä¸ªäººå¾®ä¿¡ä¸Šã€‚çˆ¬å–æŸä¸ªé¡µé¢çš„æ—¶å€™æŠ¥é”™ï¼Œé”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š</p><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-dark github-light vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">SSL routines:ssl_choose_client_version:unsupported protocol:...</span></span></code></pre></div><h2 id="é—®é¢˜åˆ†æ" tabindex="-1">é—®é¢˜åˆ†æ <a class="header-anchor" href="#é—®é¢˜åˆ†æ" aria-label="Permalink to &quot;é—®é¢˜åˆ†æ&quot;">â€‹</a></h2><p>ä¸»è¦çš„é”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š</p><ol><li>SSL</li><li>unsupported protocol</li></ol><p>åŸºäº<code>stackoverflow</code> æœç´¢ä¸€ä¸‹ï¼Œå¾—åˆ°é”™è¯¯åŸå› ï¼š<strong><code>Node.js 12&#39;s default TLS settings are stricter now. The site doesn&#39;t handle TLS v1.2. Node 12 by default need 1.2.(Nodejs 12çš„ TSL è®¾ç½®æ›´åŠ ä¸¥æ ¼äº†ï¼Œ é»˜è®¤ä½¿ç”¨1.2ç‰ˆæœ¬ï¼Œå¦‚æœç½‘ç«™ä¸æ”¯æŒå°†å‡ºç°ä»¥ä¸Šé”™è¯¯ï¼šä¸è¢«æ”¯æŒçš„åè®®).</code></strong></p><p>æ‰€ä»¥ï¼Œå› ä¸ºæ‰€çˆ¬å–çš„ç½‘ç«™ä¸æ”¯æŒ<code>TLS1.2</code>è¿”å›ä»¥ä¸Šé”™è¯¯ã€‚</p><h2 id="é—®é¢˜è§£å†³" tabindex="-1">é—®é¢˜è§£å†³ <a class="header-anchor" href="#é—®é¢˜è§£å†³" aria-label="Permalink to &quot;é—®é¢˜è§£å†³&quot;">â€‹</a></h2><p>åœ¨å®é™…é¡¹ç›®ä¸­æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼Œç›®çš„å°±æ˜¯è®¾ç½®Nodejs TLSæœ€ä½ç‰ˆæœ¬ï¼š</p><h3 id="ä»£ç ä¸­ç›´æ¥è®¾ç½®" tabindex="-1">ä»£ç ä¸­ç›´æ¥è®¾ç½® <a class="header-anchor" href="#ä»£ç ä¸­ç›´æ¥è®¾ç½®" aria-label="Permalink to &quot;ä»£ç ä¸­ç›´æ¥è®¾ç½®&quot;">â€‹</a></h3><p>åœ¨é¡¹ç›®å…¥å£å¤„è¿›è¡Œè®¾ç½®</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-dark github-light vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> { NestFactory } </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">from</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;"> &#39;@nestjs/core&#39;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> { AppModule } </span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">from</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;"> &#39;./app.module&#39;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">require</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">&#39;tls&#39;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">).</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">DEFAULT_MIN_VERSION</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> =</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;"> &#39;TLSv1&#39;</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">async</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> function</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;"> bootstrap</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">() {</span></span>
<span class="line"><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">  const</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> app</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> =</span><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;"> await</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> NestFactory.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">create</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(AppModule);</span></span>
<span class="line"><span style="--shiki-dark:#F97583;--shiki-light:#D73A49;">  await</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;"> app.</span><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">listen</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">3001</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">);</span></span>
<span class="line"><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">}</span></span>
<span class="line"><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">bootstrap</span><span style="--shiki-dark:#E1E4E8;--shiki-light:#24292E;">();</span></span></code></pre></div><h3 id="åœ¨å‘½ä»¤è¡Œä¸­è®¾ç½®" tabindex="-1">åœ¨å‘½ä»¤è¡Œä¸­è®¾ç½® <a class="header-anchor" href="#åœ¨å‘½ä»¤è¡Œä¸­è®¾ç½®" aria-label="Permalink to &quot;åœ¨å‘½ä»¤è¡Œä¸­è®¾ç½®&quot;">â€‹</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-dark github-light vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">node</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;"> main.js</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> --tls-min-v1.0</span></span></code></pre></div><h3 id="åœ¨ts-nodeä¸­ä½¿ç”¨" tabindex="-1">åœ¨<code>ts-node</code>ä¸­ä½¿ç”¨ <a class="header-anchor" href="#åœ¨ts-nodeä¸­ä½¿ç”¨" aria-label="Permalink to &quot;åœ¨\`ts-node\`ä¸­ä½¿ç”¨&quot;">â€‹</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-dark github-light vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">node</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> --tls-min-v1.0</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> -r</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;"> ts-node/register</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;"> src/main.ts</span></span></code></pre></div><h3 id="åœ¨pm2ä¸­ä½¿ç”¨" tabindex="-1">åœ¨<code>pm2</code>ä¸­ä½¿ç”¨ <a class="header-anchor" href="#åœ¨pm2ä¸­ä½¿ç”¨" aria-label="Permalink to &quot;åœ¨\`pm2\`ä¸­ä½¿ç”¨&quot;">â€‹</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-dark github-light vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#B392F0;--shiki-light:#6F42C1;">pm2</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;"> start</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;"> dist/main.js</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> --node-args</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;"> \\&quot;</span><span style="--shiki-dark:#9ECBFF;--shiki-light:#032F62;">--tls-min-v1.0</span><span style="--shiki-dark:#79B8FF;--shiki-light:#005CC5;">\\&quot;</span></span></code></pre></div>`,22)]))}const g=i(n,[["render",l]]);export{c as __pageData,g as default};
